Код для скачивания файла при выборе кнопки "Начать анализ", сейчас не используется:

//*************************************************************
// слушатель события на кнопке расширения браузерного плагина
start.addEventListener('click',() => 
{
  createData();
});

function createData()
{  
  var currentUrl = "";
  var chromeTabsError = "";
  chrome.tabs.query({ currentWindow: true, active: true }).then(saveInfoInActiveTabs, chromeTabsError);
}
async function saveInfoInActiveTabs(tabs) {
  currentUrl=tabs[0].url;
  let response = await fetch(currentUrl);
  responseText = await response.text();
  let fileContent = `${responseText}`;
  // создаем объект Blob с данными файла
  let file = new Blob([fileContent], {type: 'text/plain'});
  // создаем ссылку для скачивания файла
  let downloadLink = document.createElement('a');
  downloadLink.href = URL.createObjectURL(file);
  downloadLink.download = 'data.txt';
  // добавляем ссылку на страницу и эмулируем клик для скачивания файла
  document.body.appendChild(downloadLink);
  downloadLink.click();
  document.body.removeChild(downloadLink);
}

function chromeTabsError(error) {
  //В переменной содержится информация об ошибке получения URL активного таба
  chromeTabsError= `Error: ${error}`;
}
//*************************************************************


Код для логирования (скачивается файл с данными):

//****************ЛОГИРОВАНИЕ**********************************
// определяем значения переменных
let variable1 = currentUrl;
// создаем строку с данными переменных
let fileContent = `Переменная 1: ${variable1}`;
// создаем объект Blob с данными файла
let file = new Blob([fileContent], {type: 'text/plain'});
// создаем ссылку для скачивания файла
let downloadLink = document.createElement('a');
downloadLink.href = URL.createObjectURL(file);
downloadLink.download = 'consoleErrorDataLoading.txt';
// добавляем ссылку на страницу и эмулируем клик для скачивания файла
document.body.appendChild(downloadLink);
downloadLink.click();
document.body.removeChild(downloadLink);
//****************ЛОГИРОВАНИЕ**********************************


//**************КОД МЕНЯЕТ СОДЕРЖИМОЕ ПОПАПА*******************
  const form = document.querySelector('body')
  // Меняем содержимое новым html
  form.innerHTML = ''

  const h2Input = document.createElement("h2");
  h2Input.className="error";
  document.body.append(h2Input);
  h2Input.innerHTML = "Ошибка";

  const pInput = document.createElement("p");
  document.body.append(pInput);
  pInput.innerHTML = "Как исправить";
//**************КОД МЕНЯЕТ СОДЕРЖИМОЕ ПОПАПА*******************


//*************************************************************
ОСТАЛОСЬ ДОПИСАТЬ:
Проверяем:
Проблема:
      o	Можем ли понять цель пользователя? Если хотят что-то, то для чего? Зачем?
      o	В чем неудобство? Если делают что-то неудобно, то почему это неудобно?
      o	Это фича есть у конкурентов, но ее нет у нас? Что нам даст разработка этой фичи? Будет ли удобно пользователю?
Цель:
      o	Коротко указаны требуемые доработки, проверить все ли указали в цели? Проверить бы что то, что будет реализовано, решит проблему пользователя
Ограничения:
      o	В качестве рекомендации просьба проверить, что указаны нереализуемые доработки (цель пользователя не вся будет закрыта);
      o	Есть сценарии, которые проверить нельзя;
      o	Есть зависимости между задачами
Роли:
      o	Дорабатываем функционал? Для кого?
      o	Дорабатываем что-то с конкретной закупкой, то кто пользователь в закупке?
      o	Задавать вопрос нужен ли Оператору функционал? Если нет, то нужно ли вынести это в ограничения (нельзя проверить)?
Схемы:
      o	Должна быть когда есть доработка бизнес-процесса или новый функционал (новый процесс)
Сценарии:
      o	А они не нужны только если мы просто делаем переименовку/добавление полей/блоков на форму без условий
В требованиях:
–	Какие требования указаны?
    o	Указаны приложения которые дорабатываем
    o	Прописано у кого есть доступ и у кого точно нет доступа к функционалу
    o	В названиях не используются сокращения
    o	Новое поле
        §	Указана связь с БД
        §	Комментарий в БД к полю
        §	Указан формат поля
        §	Указано местоположение поля
        §	Если указано наличие подсказки, проверить что текст указан. Написано нужно ли где-то выгружать подсказку (на печатных формах, в архивах)
        §	Указано значение по умолчанию
        §	Поле редактируемое/нередактируемое
        §	Указана обязательность поля
        §	Указаны условия отображения
    o	Новый пакет ЕИС
        §	Есть ссылка на описание пакета или вставлена выборка на описание
        §	Описано куда сохранять данные/откуда их брать
        §	Указана потребность отправки уведомления
        §	Указана потребность публиковать событие
        §	Описана отправка пакетов в НР
    o	Новый пакет в НР
        §	Есть ссылка на описание пакета или вставлена выборка на описание
        §	Описано /откуда их брать
        §	Описано когда отправлять пакет
        o	Новый справочник
        §	Описано откуда брать 
        §	Куда записывать инфрмацию?
        §	Как обновлять справочник?
        §	Описано где он будет использоваться
    o	Добавление таблиц
        §	Прописана сортировка по-умолчанию
        §	Как еще можно сортировать?
        §	Есть поиск по таблице?
        §	Есть кнопки настройки столбцов?
        §	Есть выгрузка таблицы?
        §	Какая пагинация?
    o	Добавляем фильтр
        §	Указано значение фильтра
        §	Указано противоречит ли фильтр существующим
–	Указаны ли макеты?
–	Есть ли нумерация таблиц/макетов/примеров?
–	Учтены ошибочные сценарии? Ошибки валидации
//*************************************************************




Про базу знаний:
Вообще-то есть кое-какая информация, сведенная в одну таблицу Проработка базы знаний.xlsx

Как сохранять данные в переменные:

по-очереди парсим значения тегов, если находим пустой - пишем null, если находим несколько - записываем коллекцию в ячейку массива (можно ли так вообще??)

Как проводить проверку в требованиях:

начиная с id=1 и до конца{
      если before==true{
            если countWarriable=0{
                  отображаем текст;
            }
            иначе если countWarriable = 1{
                  если hasFirst==true{
                        если в заголовках = keeWordFirst[i]{
                              отображаем текст;
                        }
                  }
                  иначе{
                        если в заголовках != keeWordFirst[i]{
                              отображаем текст;
                        }
                  }
            }
            иначе если countWarriable=2{
                  если hasFirst==true{
                        если hasSecond==true{
                        }
                        иначе{
                        }
                  }
                  иначе{                        
                        если hasSecond==true{
                        }
                        иначе{
                        }
                  }
            }
      }
      если before==false{
            если в тексте == keeWordFirst И в тексте != keeWordSecond{
                  отображаем текст
            }
      }
}



Что доделать:

1) Запретить закрывать расширение, если выполняется клик вне окна расширения (чтобы можно было оставить комментарии/исправить ошибки);
2) Добавить логирование чтобы протестировать работу расширения и понять как часто и какие ошибки оно ловит. Можно будет использовать для статистики;
3) Дописать базу знаний в части solution, т.к. там текстовки сырые и я их особо не расписывала;
4) Дописать текст второго раздела ВКР;
5) Поправить логику сохранения данных со страницы (не парсятся заголовки);
6) Добавлять и удалять данные из базы знаний;
7) Посмотреть как работает на хороших и плохих требованиях, дать пример страниц (прислать на чем тестировать);
8) Завтра скорее всего приехать можно будет показать что есть












Диаграмма https://sequencediagram.org/:

activate Пользователь
Пользователь->Браузерное расширение: Нажать на иконку браузерного \nрасширения на панели браузера
activate Браузерное расширение 
Браузерное расширение->База знаний: Отправить запрос на чтение \nинформации из базы знаний
activate База знаний
База знаний-->Браузерное расширение: Отдать данные на обработку
deactivate База знаний
Браузерное расширение-->Пользователь:Отобразить веб-интерфейс
Пользователь->Браузерное расширение: Запустить экспертную систему
Браузерное расширение->Веб-страница: Отправить запрос на чтение данных с веб-страницы
activate Веб-страница
Веб-страница-->Браузерное расширение: Отдать данные на обработку
deactivate Веб-страница
Браузерное расширение->Браузерное расширение: Проанализировать содержимое\nвеб-страницы, используя данные\nиз базы знаний
Браузерное расширение-->Пользователь:Отобразить рекомендации \nэкспертной системы
deactivate Браузерное расширение 





  <rule>
    <id>1</id>
    <before>true</before>
    <countWarriable>1</countWarriable>
    <hasFirst>false</hasFirst>
    <keeWordsFirst>
        <keeWordFirst>содержание</keeWordFirst>
    </keeWordsFirst>
    <styleType>error</styleType>
    <solution>Основные разделы CRQ должны быть представлены подпунктами данной страницы. Обычно содержание располагают после раздела "Версии документа". Содержание добавляется на страницу при помощи макроса "Оглавление".</solution>
    <description>информация которая видна только в xml</description>
  </rule>

  <rule>
    <id>2</id>
    <before>true</before>
    <countWarriable>1</countWarriable>
    <hasFirst>false</hasFirst>
    <keeWordsFirst>
        <keeWordFirst>версии документа</keeWordFirst>
    </keeWordsFirst>
    <styleType>error</styleType>
    <solution>Добавить раздел с информацией о версиях документа. В разделе должна содержаться таблица с информацией о версионности документа. Таблица должна содержать столбцы: “Версия”, “Дата”, “Задача”, “Кто внес изменения”, “Раздел документа”, “Изменения”.</solution>
    <description>информация которая видна только в xml</description>
  </rule>